<!doctype html>
<html>
  <head>
    <script type="text/javascript" src="../libraries/p5.min.js"></script>
    <script type="text/javascript" src="../libraries/p5.play.js"></script>
    <style>
      html, body {
        overflow: hidden;
        margin: 0;
        padding: 0;
        background:white;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript">
    
      /****
        SCENE 7: interactive dog outfit picker

        Arthur: greaser
        Merlin: poodle skirt
      ****/

      const canvas_height = 375;
      const canvas_width = 500;

      let arthur_img, merlin_img, arthur, merlin;
      let arthur_success, merlin_success;
      let greaser, skirt;

      function preload() {
        // nakie
        arthur_img = loadImage('../assets/img/dog-01.png');
        merlin_img = loadImage('../assets/img/dog-02.png');

        // clothed
        arthur_success = loadImage('../assets/img/dog-01-successs.jpg');
        merlin_success = loadImage('../assets/img/dog-02-success.jpg');
      }

      function setup() {
        createCanvas(canvas_width, canvas_height);

        // resize pngs
        arthur_img.resize(0, 120);
        merlin_img.resize(0, 150);

        // create sprite with image of dogs
        arthur = createSprite(100, height/2); 
        merlin = createSprite(width-100, height/2); 
        arthur.addImage(arthur_img);
        merlin.addImage(merlin_img);

        // greaser outfit
        greaser = createSprite(random(0, width), random(0, height), 20, 80);
        greaser.shapeColor = color(36, 31, 36);
        greaser.mouseActive = true; // track mouse state

        // skirt outfit
        skirt = createSprite(random(0, width), random(0, height), 50, 30);
        skirt.shapeColor = color(245, 103, 240);
        skirt.mouseActive = true; // track mouse state
      }

      function draw() {
        background(50);
        textSize(24);
        fill(255);
        text("outfit change... go!",
          width/3, height*0.1);
        text("what would arthur and merlin wear?",
          width/5, height*0.2);

        // case: user clicks on greaser
        if (greaser.mouseIsOver && mouseIsPressed) {
          greaser.position.x = mouseX;
          greaser.position.y = mouseY;
        }

        // user clicks on skirt
        if (skirt.mouseIsOver && mouseIsPressed) {
          skirt.position.x = mouseX;
          skirt.position.y = mouseY;
        }

        greaser.overlap(arthur, ootoo);
        skirt.overlap(merlin, meemee);

        drawSprites();
      }

      function ootoo(greaser, arthur) {
        // snap outfit to dog
        greaser.position.x = arthur.position.x;
        greaser.position.y = arthur.position.y;

        // switch sprite to image
        image(arthur_success, arthur.position.x-60, arthur.position.y-70, 120, 160);

        // remove sprites
        greaser.remove();
        arthur.remove();
      }
      
      function meemee(skirt, merlin) {
        // snap outfit to dog
        skirt.position.x = merlin.position.x;
        skirt.position.y = merlin.position.y;

        // switch sprite to image
        image(merlin_success, merlin.position.x-60, merlin.position.y-80, 130, 160);

        // remove sprites
        skirt.remove();
        merlin.remove();
      }

    </script>
  </body>
</html>