<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="../libraries/p5.min.js"></script>
    <!-- <script type="text/javascript" src="../libraries/p5.draggable.js"></script> -->
    <script type="text/javascript" src="../libraries/p5.play.js"></script>
    <script type="text/javascript" src="../libraries/p5.sound.min.js"></script>
    <style>
      html,
      body {
        overflow: hidden;
        margin: 0;
        padding: 0;
        background: white;
      }

      button {
        font-family: Georgia, "Times New Roman", Times, serif;
        background-color: aliceblue;
      }

      #defaultCanvas0 {
        margin-left: 65px;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript">
      /****
        SCENE 9R: record player scratch
      ****/

      // Canvas variables
      const canvas_height = 270;
      const canvas_width = 380;

      var arm_img, bg_img;
      var x = 0;
      var y = 0;

      let angle = 0.0;
      let jitter = 0.0;

      function preload() {
        arm_img = loadImage("../assets/img/9R_recordplayer_arm.png");
        bg_img = loadImage("../assets/img/9R_recordplayer.jpg");
        record_scratch = loadSound(
          "../assets/audio/interactive/record-scratch.m4a"
        );
      }

      function setup() {
        cnv = createCanvas(canvas_width, canvas_height);
      }

      function draw() {
        background(bg_img);
        frameRate(12);

        rotate(-1);

        //move the shape to the center of the canvas
        translate(-20, 185);

        jitter = random(-15, 15);

        angle = angle + jitter;
        rotate(radians(angle));

        image(arm_img, x, y, 55, 110);
        angle = angle - jitter;

        cnv.mouseOver(togglePlay);
      }

      function togglePlay() {
        record_scratch.play();
      }
    </script>
  </body>
</html>
